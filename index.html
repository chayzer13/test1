<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>TAPOLKA</title>  
    <link rel="stylesheet" href="./css/slyle.css">  
</head>  
<body>  
    <div class="container">  
        <div class="boxgm">  
            <div class="user-info">  
                <img id="userPhoto" src="userPhoto.src" alt="Аватар пользователя" style="display: none;">  
                <div>  
                    <span class="user-name" id="userName">Имя пользователя</span>  
                    <p class="user-status">Статус: Бомж</p>  
                </div>  
            </div>  
            <div class="lega">  
                <a href="">  
                    <img src="./img/Trophy.png" alt="lega">  
                    <p class="legaa">Лига</p>  
                </a>  
            </div>  
        </div>  
        <div class="box">  
            <div class="card">  
                <div class="card-map">  
                    <img src="./img/image 2.png" alt="">  
                </div>  
                <div class="card-about">  
                    <img src="./img/MasterCard.png" alt="">  
                    <p class="nubmer-card">.... 3052</p>  
                    <div class="balanse-card">  
                        <p class="balanse-card">Баланс: хххх Coins</p>  
                    </div>  
                    <div class="datecar">  
                        <div class="date-card-maus">  
                            <p class="date-maus">D/M</p>  
                        </div>  
                        <div class="date-card-dm">  
                            <p class="date-dm">07/30</p>  
                        </div>  
                    </div>  
                </div>  
            </div>  
        </div>  
    </div>  
 
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    const tg = window.Telegram.WebApp;

    // Проверяем, есть ли данные пользователя
    if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
        const user = tg.initDataUnsafe.user;

        // Устанавливаем имя пользователя
        document.getElementById('userName').textContent = user.first_name || "Пользователь";

        // Проверяем, есть ли URL аватарки
        if (user.photo_url) {
            const userPhoto = document.getElementById('userPhoto');

            // Устанавливаем URL аватарки пользователя
            userPhoto.src = user.photo_url;

            // Отображаем фото только после успешной загрузки
            userPhoto.onload = function() {
                userPhoto.style.display = 'block';
            };

            // Обрабатываем ошибку загрузки
            userPhoto.onerror = function() {
                console.log("Ошибка загрузки аватарки.");
                userPhoto.style.display = 'none';
            };

        } else {
            console.log("Аватарка отсутствует у пользователя.");
        }

    } else {
        // Если пользователь не найден, задаём гостевое имя
        document.getElementById('userName').textContent = "Гость";
        console.log("Данные пользователя не найдены.");
    }
</script>

</body>  
</html>  
